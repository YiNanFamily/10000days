<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10000å¤©å¿«ä¹ï¼</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/css/lg-thumbnail.min.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <h1>äº²çˆ±çš„æ¥ æ¥ å®ï¼Œ10000å¤©å¿«ä¹ï¼</h1>
        <p>æ¯ä¸€ä¸ªç›¸å†Œï¼Œéƒ½çè—ç€ä¸€äº›ä¸“å±äºä½ çš„æ•…äº‹ã€‚å‰è·¯æœªå¤®ï¼Œå…±èµ´å±±æµ·ï¼Œæ„¿ä½ æ°¸è¿œè¢«çˆ±å’Œå¿«ä¹åŒ…å›´ï¼</p>
        <button id="play-music-btn">ğŸµ æ¥ç‚¹éŸ³ä¹å§</button>
    </header>

    <main class="gallery-container">
        <div class="gallery" id="gallery-grid">
            <p class="loading-message">æ­£åœ¨ä¸ºä½ åŠ è½½ä¸“å±å›å¿†ï¼Œè¯·ç¨å€™...</p>
        </div>
    </main>

    <footer>
        <p>æ°¸è¿œçˆ±ä½ çš„å‘†å­é™ˆä¸€</p>
        <p>&copy; 2025.06.14 - Just for You</p>
    </footer>

    <audio id="bg-music" loop></audio>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/lightgallery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/plugins/thumbnail/lg-thumbnail.min.js"></script>

    <script>
        // =========================================================================
        // ========= ä½ å”¯ä¸€éœ€è¦ä¿®æ”¹çš„åœ°æ–¹ï¼šä½ çš„9ä¸ªç›¸å†Œé…ç½® ============
        // =========================================================================
        const galleries = [
            { title: "ç‹¬å®¶ç²¾é€‰", folder: "Selected" },
            { title: "å½“ç„¶è¦åˆç…§å•¦", folder: "Together" },
            { title: "ç¯çƒæ—…è¡Œè¿›è¡Œä¸­", folder: "Travel" },
            { title: "é‚£äº›é—ªé—ªå‘å…‰çš„æ—¥å­", folder: "Anniversary" },
            { title: "çˆ±å°±æ˜¯ä¸€èµ·åƒå¥½å¤šé¡¿é¥­", folder: "Food" },
            { title: "é™ªä½ æ—¥å¸¸ä¹Ÿæ˜¯ææ¬¢å–œ", folder: "Daily" },
            { title: "æˆ‘ä»¬è§£é”çš„æ–°æŠ€èƒ½", folder: "Activities" },
            { title: "æ•…äº‹å¼€å§‹ä¹‹å‰", folder: "Past" },
            { title: "æœªå®Œå¾…ç»­", folder: "TBD" }
        ];
        // =========================================================================
        // ====================== ä»¥ä¸‹ä»£ç æ— éœ€ä¿®æ”¹ ========================
        // =========================================================================
    
        const galleryGrid = document.getElementById('gallery-grid');
        const loadingMessage = document.querySelector('.loading-message');
    
        // æ¢æµ‹å•ä¸ªå›¾ç‰‡æ˜¯å¦å­˜åœ¨ (å¤„ç† jpg å’Œ png)
        async function probeImage(pathWithoutExtension) {
            const extensions = ['jpg', 'png', 'jpeg', 'gif']; // ä½ å¯ä»¥æ·»åŠ æ›´å¤šæ”¯æŒçš„æ ¼å¼
            for (const ext of extensions) {
                const path = `${pathWithoutExtension}.${ext}`;
                try {
                    await new Promise((resolve, reject) => {
                        const img = new Image();
                        img.onload = resolve;
                        img.onerror = reject;
                        img.src = path;
                    });
                    return path; // å¦‚æœæˆåŠŸåŠ è½½ï¼Œè¿”å›å®Œæ•´è·¯å¾„
                } catch (error) {
                    // å¦‚æœå½“å‰æ ¼å¼å¤±è´¥ï¼Œç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªæ ¼å¼
                    continue;
                }
            }
            return null; // å¦‚æœæ‰€æœ‰æ ¼å¼éƒ½å¤±è´¥äº†ï¼Œè¿”å› null
        }
    
        // ä¸»å‡½æ•°ï¼Œåˆ›å»ºå¹¶å¡«å……æ‰€æœ‰ç›¸å†Œ
        async function createGalleries() {
            // éšè—åŠ è½½æç¤º
            if(loadingMessage) loadingMessage.style.display = 'none';
    
            let galleryIdCounter = 1;
            for (const galleryInfo of galleries) {
                const imagePaths = [];
                let i = 1;
                while (true) {
                    const imagePath = await probeImage(`images/${galleryInfo.folder}/${i}`);
                    if (imagePath) {
                        imagePaths.push(imagePath);
                        i++;
                    } else {
                        break; // å½“æ‰¾ä¸åˆ°å›¾ç‰‡æ—¶ï¼ˆjpgå’Œpngéƒ½è¯•è¿‡ï¼‰ï¼Œåœæ­¢æ¢æµ‹
                    }
                }
    
                if (imagePaths.length > 0) {
                    const galleryId = `gallery-album-${galleryIdCounter++}`;
                    const coverImage = imagePaths[0];
    
                    // åˆ›å»ºç›¸å†Œçš„ HTML ç»“æ„
                    const galleryItem = document.createElement('div');
                    galleryItem.id = galleryId;
                    galleryItem.className = 'gallery-item';
    
                    let htmlContent = `
                        <a href="${coverImage}">
                            <img src="${coverImage}" alt="${galleryInfo.title}">
                        </a>
                        <p class="caption">${galleryInfo.title}</p>
                    `;
                    
                    // æ·»åŠ å›¾é›†é‡Œå…¶ä»–éšè—çš„å›¾ç‰‡é“¾æ¥
                    for (let j = 1; j < imagePaths.length; j++) {
                        htmlContent += `<a href="${imagePaths[j]}" style="display:none;"></a>`;
                    }
                    
                    galleryItem.innerHTML = htmlContent;
                    galleryGrid.appendChild(galleryItem);
    
                    // åˆå§‹åŒ– lightgallery
                    lightGallery(galleryItem, {
                        selector: 'a',
                        thumbnail: true,
                        download: false
                    });
                }
            }
        }
    
        // å¯åŠ¨ï¼
        createGalleries();
    </script>
    <script>
        // // ç›¸å†Œé…ç½®
        // const galleryConfig = [
        //     { id: 'album1', title: 'ç›¸é‡ä¹‹å‰', folder: 'images/past', count: 3 },
        //     { id: 'album2', title: 'ç”Ÿæ´»ç‚¹æ»´', folder: 'images/daily', count: 3 },
        //     { id: 'album3', title: 'ç‰¹åˆ«çºªå¿µæ—¥', folder: 'images/special', count: 2 },
        //     { id: 'album4', title: 'ç”œèœœæ—¶å…‰', folder: 'images/sweet', count: 5 },
        //     { id: 'album5', title: 'æ—…è¡Œè®°å¿†', folder: 'images/travel', count: 6 },
        //     { id: 'album6', title: 'ç¾é£Ÿè®°å½•', folder: 'images/food', count: 4 },
        //     { id: 'album7', title: 'èŠ‚æ—¥åº†ç¥', folder: 'images/festival', count: 3 },
        //     { id: 'album8', title: 'æ—¥å¸¸éšæ‹', folder: 'images/casual', count: 4 },
        //     { id: 'album9', title: 'çè´µç¬é—´', folder: 'images/precious', count: 5 }
        // ];

        // // åˆ›å»ºç›¸å†ŒHTML
        // function createGalleryHTML() {
        //     const mainGallery = document.getElementById('main-gallery');
            
        //     galleryConfig.forEach(config => {
        //         const galleryItem = document.createElement('div');
        //         galleryItem.id = config.id;
        //         galleryItem.className = 'gallery-item';
                
        //         // åˆ›å»ºç¬¬ä¸€ä¸ªå¯è§çš„å›¾ç‰‡é“¾æ¥
        //         const firstImage = document.createElement('a');
        //         firstImage.href = `${config.folder}/1.jpg`;
        //         const img = document.createElement('img');
        //         img.src = `${config.folder}/1.jpg`;
        //         img.alt = config.title;
        //         firstImage.appendChild(img);
                
        //         // æ·»åŠ æ ‡é¢˜
        //         const caption = document.createElement('p');
        //         caption.className = 'caption';
        //         caption.textContent = config.title;
                
        //         galleryItem.appendChild(firstImage);
        //         galleryItem.appendChild(caption);
                
        //         // æ·»åŠ å…¶ä»–éšè—çš„å›¾ç‰‡é“¾æ¥
        //         for (let i = 2; i <= config.count; i++) {
        //             const hiddenLink = document.createElement('a');
        //             hiddenLink.href = `${config.folder}/${i}.jpg`;
        //             hiddenLink.style.display = 'none';
        //             galleryItem.appendChild(hiddenLink);
        //         }
                
        //         mainGallery.appendChild(galleryItem);
        //     });
        // }

        // // åˆå§‹åŒ–æ‰€æœ‰ç›¸å†Œ
        // function initGalleries() {
        //     createGalleryHTML();
            
        //     galleryConfig.forEach(config => {
        //         lightGallery(document.getElementById(config.id), {
        //             selector: 'a',
        //             thumbnail: true,
        //             loop: true,
        //             autoplay: true,
        //             autoplayControls: true,
        //             progressBar: true
        //         });
        //     });
        // }

        // // åˆå§‹åŒ–ç›¸å†Œ
        // initGalleries();

        // --- éŸ³ä¹æ’­æ”¾åˆ—è¡¨åŠŸèƒ½ ---
        const musicPlayer = document.getElementById('bg-music');
        const playBtn = document.getElementById('play-music-btn');
        
        const musicPlaylist = [
            'music/ã‚¯ãƒªã‚¹ãƒã‚¹ã‚½ãƒ³ã‚°.m4a',
            'music/The Scientist.mp3',
            'music/è¡—ç¯æ™šé¤.m4a'
        ];
        
        let currentSongIndex = 0;

        function playNextSong() {
            currentSongIndex = (currentSongIndex + 1) % musicPlaylist.length; // å¾ªç¯æ’­æ”¾
            musicPlayer.src = musicPlaylist[currentSongIndex];
            musicPlayer.play();
        }

        // ç›‘å¬æ­Œæ›²æ’­æ”¾ç»“æŸäº‹ä»¶
        musicPlayer.addEventListener('ended', playNextSong);

        // ç›‘å¬æ’­æ”¾æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        playBtn.addEventListener('click', () => {
            if (musicPlayer.paused) {
                musicPlayer.src = musicPlaylist[currentSongIndex];
                musicPlayer.play();
                playBtn.textContent = 'â¸ï¸ æš‚åœéŸ³ä¹';
            } else {
                musicPlayer.pause();
                playBtn.textContent = 'ğŸµ ç»§ç»­æ’­æ”¾';
            }
        });
    </script>

</body>
</html>